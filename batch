# Stream and replace '~' with ',' line by line (prevents memory issues)
$reader = [System.IO.StreamReader]::new('bigfile.txt')
$writer = [System.IO.StreamWriter]::new('bigfile.csv', $false, $reader.CurrentEncoding)

while (($line = $reader.ReadLine()) -ne $null) {
    $writer.WriteLine($line.Replace('~', ','))
}

$reader.Close()
$writer.Close
()
