$reader = New-Object System.IO.StreamReader 'bigfile.txt'
$writer = New-Object System.IO.StreamWriter 'bigfile.csv', $false, $reader.CurrentEncoding

while ($true) {
    $line = $reader.ReadLine()
    if ($line -eq $null) { break }
    $writer.WriteLine($line.Replace('~', ','))
}

$reader.Close()
$writer.Close()
